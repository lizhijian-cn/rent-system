{"remainingRequest":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/src/views/login/index.vue","mtime":1591125235897},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/cache-loader/dist/cjs.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/babel-loader/lib/index.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/cache-loader/dist/cjs.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/vue-loader/lib/index.js","mtime":1590898200561}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { tenantMenu, staffMenu, menu } from '@/config/menu-config'\nimport Layout from '@/layout/Layout'\n\nexport default {\n  data() {\n    return {\n      loginForm: {\n        username: 'staff',\n        password: '000000',\n      },\n      loginRules: {\n        // TODO\n      },\n      registerForm: {\n        username: '',\n        password: '',\n        role: '1',\n      },\n      registerRules: {\n        // TODO\n      },\n      capsToolTip: false,\n      registerDialogVisible: false,\n    }\n  },\n  methods: {\n    checkCapslock(e) {\n      const { key } = e\n      this.capsTooltip = key && key.length === 1 && (key >= 'A' && key <= 'Z')\n    },\n    handleLogin() {\n      this.postRequest('/account/login', this.loginForm).then(resp => {\n        if (resp) {\n          console.log(resp)\n          window.sessionStorage.setItem('username', this.username)\n          window.sessionStorage.setItem('role', this.role)\n          this.addRouters(resp.role)\n        }\n      })\n    },\n    handleRegister() {\n      // $TODO: AUTO LOGIN\n    },\n    addRouters(role) {\n      if (role === 'ROLE_TENANT') {\n        tenantMenu.forEach(x => menu.push(x))\n      }\n      else if (role === 'ROLE_STAFF') {\n        staffMenu.forEach(x => menu.push(x))\n      } else {\n        console.error(\"role error\")\n      }\n      // 侧边栏二级菜单路由\n      \n      let LayoutChildren = []\n      menu.forEach((item) => {\n        item.sub.forEach((cell) => {\n          LayoutChildren.push({\n            path: cell.index,\n            meta: cell.meta,\n            component: cell.component\n          })\n        })\n      })\n\n      this.$router.addRoutes([{\n        path: '/home',\n        component: Layout,\n        children: LayoutChildren\n      }])\n\n      this.$router.push('/home')\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login--containner\">\n    <el-form class=\"login-form\" :model=\"loginForm\" :rules=\"loginRules\">\n\n      <h3>Login Form</h3>\n\n      <el-form-item prop=\"username\">\n        <el-input type=\"text\" v-model=\"loginForm.username\" autocomplete=\"on\"\n        />\n      </el-form-item>\n\n      <el-tooltip v-model=\"capsToolTip\" content=\"大写锁定已打开\" placement=\"right\" manual>\n        <el-form-item prop=\"password\">\n          <el-input type=\"text\" v-model=\"loginForm.password\" autocomplete=\"on\" \n            @keyup.native=\"checkCapslock\" \n            @blur=\"capsToolTip = false\"\n            @keyup.enter.native=\"handleLogin\"\n          />\n        </el-form-item>\n      </el-tooltip>\n\n      <el-button type=\"primary\" @click.native.prevent=\"handleLogin\">Login</el-button>\n\n      <el-button type=\"info\" @click=\"registerDialogVisible = true\">未注册？ 点击注册</el-button>\n\n    </el-form>\n\n    <el-dialog title=\"register\" :visible.sync=\"registerDialogVisible\">\n      <el-form class=\"register-form\" :model=\"registerForm\" :rules=\"registerRules\">\n        \n        <el-radio v-model=\"registerForm.role\" label=\"1\">租客</el-radio>\n        <el-radio v-model=\"registerForm.role\" label=\"2\">客服</el-radio>\n\n        <el-form-item prop=\"username\" label=\"用户名\">\n          <el-input type=\"text\" v-model=\"registerForm.username\" autocomplete=\"on\"\n          />\n        </el-form-item>\n\n        <el-form-item prop=\"password\" label=\"密码\">\n          <el-input type=\"text\" v-model=\"registerForm.password\" autocomplete=\"on\"\n          />\n        </el-form-item>\n\n      </el-form>\n\n      <div>\n        <el-button type=\"primary\" @click=\"registerDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleRegister\">注 测</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { tenantMenu, staffMenu, menu } from '@/config/menu-config'\n  import Layout from '@/layout/Layout'\n\n  export default {\n    data() {\n      return {\n        loginForm: {\n          username: 'staff',\n          password: '000000',\n        },\n        loginRules: {\n          // TODO\n        },\n        registerForm: {\n          username: '',\n          password: '',\n          role: '1',\n        },\n        registerRules: {\n          // TODO\n        },\n        capsToolTip: false,\n        registerDialogVisible: false,\n      }\n    },\n    methods: {\n      checkCapslock(e) {\n        const { key } = e\n        this.capsTooltip = key && key.length === 1 && (key >= 'A' && key <= 'Z')\n      },\n      handleLogin() {\n        this.postRequest('/account/login', this.loginForm).then(resp => {\n          if (resp) {\n            console.log(resp)\n            window.sessionStorage.setItem('username', this.username)\n            window.sessionStorage.setItem('role', this.role)\n            this.addRouters(resp.role)\n          }\n        })\n      },\n      handleRegister() {\n        // $TODO: AUTO LOGIN\n      },\n      addRouters(role) {\n        if (role === 'ROLE_TENANT') {\n          tenantMenu.forEach(x => menu.push(x))\n        }\n        else if (role === 'ROLE_STAFF') {\n          staffMenu.forEach(x => menu.push(x))\n        } else {\n          console.error(\"role error\")\n        }\n        // 侧边栏二级菜单路由\n        \n        let LayoutChildren = []\n        menu.forEach((item) => {\n          item.sub.forEach((cell) => {\n            LayoutChildren.push({\n              path: cell.index,\n              meta: cell.meta,\n              component: cell.component\n            })\n          })\n        })\n\n        this.$router.addRoutes([{\n          path: '/home',\n          component: Layout,\n          children: LayoutChildren\n        }])\n\n        this.$router.push('/home')\n      }\n    }\n  }\n</script>"]}]}